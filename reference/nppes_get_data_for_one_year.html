<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Process NPPES Data for One Year with Chunked Processing — nppes_get_data_for_one_year • tyler</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Process NPPES Data for One Year with Chunked Processing — nppes_get_data_for_one_year"><meta property="og:description" content="This function processes NPPES (National Plan and Provider Enumeration System) data for a single year.
It reads raw data from a CSV file, filters it based on specified taxonomy codes, and writes the cleaned data
to an output CSV file. The function processes data in manageable chunks to optimize memory usage, logs progress,
and includes auditory feedback for significant stages."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tyler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a>
    </li>
    <li>
      <a href="../articles/geocode.html">Geocoding</a>
    </li>
    <li>
      <a href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a>
    </li>
    <li>
      <a href="../articles/my-vignette.html">Searching the NPI Database Starting with Taxonomy Codes</a>
    </li>
    <li>
      <a href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a>
    </li>
    <li>
      <a href="../articles/validate_and_remove_invalid_npi.html">Gather Physician Data Starting With NPI Numbers</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Process NPPES Data for One Year with Chunked Processing</h1>

    <div class="hidden name"><code>nppes_get_data_for_one_year.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function processes NPPES (National Plan and Provider Enumeration System) data for a single year.
It reads raw data from a CSV file, filters it based on specified taxonomy codes, and writes the cleaned data
to an output CSV file. The function processes data in manageable chunks to optimize memory usage, logs progress,
and includes auditory feedback for significant stages.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nppes_get_data_for_one_year</span><span class="op">(</span></span>
<span>  <span class="va">npi_file_path</span>,</span>
<span>  <span class="va">output_csv_path</span>,</span>
<span>  duckdb_file_path <span class="op">=</span></span>
<span>    <span class="st">"/Volumes/Video Projects Muffly 1/nppes_historical_downloads/my_duckdb.duckdb"</span>,</span>
<span>  taxonomy_codes_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"207V00000X"</span>, <span class="st">"207VB0002X"</span>, <span class="st">"207VC0300X"</span>, <span class="st">"207VC0200X"</span>,</span>
<span>    <span class="st">"207VX0201X"</span>, <span class="st">"207VG0400X"</span>, <span class="st">"207VH0002X"</span>, <span class="st">"207VM0101X"</span>, <span class="st">"207VX0000X"</span>, <span class="st">"207VE0102X"</span>,</span>
<span>    <span class="st">"207VF0040X"</span><span class="op">)</span>,</span>
<span>  taxonomy_codes_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"207V00000X"</span>, <span class="st">"207VB0002X"</span>, <span class="st">"207VC0300X"</span>, <span class="st">"207VC0200X"</span>,</span>
<span>    <span class="st">"207VX0201X"</span>, <span class="st">"207VG0400X"</span>, <span class="st">"207VH0002X"</span>, <span class="st">"207VM0101X"</span>, <span class="st">"207VX0000X"</span>, <span class="st">"207VE0102X"</span>,</span>
<span>    <span class="st">"207VF0040X"</span><span class="op">)</span>,</span>
<span>  save_column_in_each_nppes_year <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  excel_file_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-npi-file-path">npi_file_path<a class="anchor" aria-label="anchor" href="#arg-npi-file-path"></a></dt>
<dd><p>A character string specifying the path to the raw NPPES data CSV file.
This file should contain the raw data for one year, typically downloaded from NPPES.</p></dd>


<dt id="arg-output-csv-path">output_csv_path<a class="anchor" aria-label="anchor" href="#arg-output-csv-path"></a></dt>
<dd><p>A character string specifying the full file path where the cleaned data will be saved.
The file will be created or overwritten during the process.</p></dd>


<dt id="arg-duckdb-file-path">duckdb_file_path<a class="anchor" aria-label="anchor" href="#arg-duckdb-file-path"></a></dt>
<dd><p>A character string specifying the path to the DuckDB database file.
This is used for temporary data storage during processing. Defaults to
<code>"/Volumes/Video Projects Muffly 1/nppes_historical_downloads/my_duckdb.duckdb"</code>.</p></dd>


<dt id="arg-taxonomy-codes-">taxonomy_codes_1<a class="anchor" aria-label="anchor" href="#arg-taxonomy-codes-"></a></dt>
<dd><p>A character vector of taxonomy codes used to filter data in
<code>Healthcare Provider Taxonomy Code_1</code>. Defaults to common codes for healthcare providers.</p></dd>


<dt id="arg-taxonomy-codes-">taxonomy_codes_2<a class="anchor" aria-label="anchor" href="#arg-taxonomy-codes-"></a></dt>
<dd><p>A character vector of taxonomy codes used to filter data in
<code>Healthcare Provider Taxonomy Code_2</code>. Defaults to the same set as <code>taxonomy_codes_1</code>.</p></dd>


<dt id="arg-save-column-in-each-nppes-year">save_column_in_each_nppes_year<a class="anchor" aria-label="anchor" href="#arg-save-column-in-each-nppes-year"></a></dt>
<dd><p>A logical value indicating whether to save a sample of
the data to an Excel file for each year. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-excel-file-path">excel_file_path<a class="anchor" aria-label="anchor" href="#arg-excel-file-path"></a></dt>
<dd><p>A character string specifying the path to save the Excel file if
<code>save_column_in_each_nppes_year</code> is <code>TRUE</code>. Defaults to <code>NULL</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame containing the cleaned NPPES data for one year. The processed data is also saved
to the file specified by <code>output_csv_path</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is designed for handling large NPPES datasets. By chunking the data, it avoids
memory-related issues while providing a structured way to process and clean the data.
Filtering is based on user-specified taxonomy codes for healthcare providers.</p>
<p>Logs are generated at each step to track progress, and system beeps are used for auditory feedback
(requires the <code>beepr</code> package). If <code>save_column_in_each_nppes_year</code> is <code>TRUE</code>, the function
saves a sample of the processed data to an Excel file for verification or further analysis.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Ensure that the <code>npi_file_path</code> points to a valid CSV file containing raw NPPES data.
The <code>taxonomy_codes_1</code> and <code>taxonomy_codes_2</code> parameters should be adjusted as needed
for specific filtering requirements.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: Process data with default taxonomy codes and save to CSV</span></span></span>
<span class="r-in"><span><span class="fu">nppes_get_data_for_one_year</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_file_path <span class="op">=</span> <span class="st">"path/to/nppes_data_2024.csv"</span>,</span></span>
<span class="r-in"><span>  output_csv_path <span class="op">=</span> <span class="st">"path/to/cleaned_data_2024.csv"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.4875] Starting the NPPES data processing for one year...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.487634] Inputs:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.487713]   npi_file_path: path/to/nppes_data_2024.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.487969]   output_csv_path: path/to/cleaned_data_2024.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.48817]   duckdb_file_path: /Volumes/Video Projects Muffly 1/nppes_historical_downloads/my_duckdb.duckdb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.488373]   taxonomy_codes_1: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.488576]   taxonomy_codes_2: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>beep() could not play the sound due to the following error:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Error in play.default(x, rate, ...): no audio drivers are available</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in nppes_initialize_environment():</span> could not find function "nppes_initialize_environment"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Customize taxonomy codes and process data</span></span></span>
<span class="r-in"><span><span class="fu">nppes_get_data_for_one_year</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_file_path <span class="op">=</span> <span class="st">"path/to/nppes_data_2023.csv"</span>,</span></span>
<span class="r-in"><span>  output_csv_path <span class="op">=</span> <span class="st">"path/to/cleaned_data_2023.csv"</span>,</span></span>
<span class="r-in"><span>  taxonomy_codes_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"207X00000X"</span>, <span class="st">"207Y00000X"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  taxonomy_codes_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"207X00000X"</span>, <span class="st">"207Y00000X"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.496193] Starting the NPPES data processing for one year...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.496288] Inputs:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.496363]   npi_file_path: path/to/nppes_data_2023.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.496583]   output_csv_path: path/to/cleaned_data_2023.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.496778]   duckdb_file_path: /Volumes/Video Projects Muffly 1/nppes_historical_downloads/my_duckdb.duckdb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.497015]   taxonomy_codes_1: 207X00000X, 207Y00000X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.49722]   taxonomy_codes_2: 207X00000X, 207Y00000X</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>beep() could not play the sound due to the following error:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Error in play.default(x, rate, ...): no audio drivers are available</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in nppes_initialize_environment():</span> could not find function "nppes_initialize_environment"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Save a sample of the data to an Excel file</span></span></span>
<span class="r-in"><span><span class="fu">nppes_get_data_for_one_year</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_file_path <span class="op">=</span> <span class="st">"path/to/nppes_data_2022.csv"</span>,</span></span>
<span class="r-in"><span>  output_csv_path <span class="op">=</span> <span class="st">"path/to/cleaned_data_2022.csv"</span>,</span></span>
<span class="r-in"><span>  save_column_in_each_nppes_year <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  excel_file_path <span class="op">=</span> <span class="st">"path/to/sample_data_2022.xlsx"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.503791] Starting the NPPES data processing for one year...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.503884] Inputs:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.503957]   npi_file_path: path/to/nppes_data_2022.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.50418]   output_csv_path: path/to/cleaned_data_2022.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.504385]   duckdb_file_path: /Volumes/Video Projects Muffly 1/nppes_historical_downloads/my_duckdb.duckdb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.504579]   taxonomy_codes_1: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.504784]   taxonomy_codes_2: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>beep() could not play the sound due to the following error:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Error in play.default(x, rate, ...): no audio drivers are available</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in nppes_initialize_environment():</span> could not find function "nppes_initialize_environment"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Process data with a custom DuckDB path</span></span></span>
<span class="r-in"><span><span class="fu">nppes_get_data_for_one_year</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_file_path <span class="op">=</span> <span class="st">"path/to/nppes_data_2021.csv"</span>,</span></span>
<span class="r-in"><span>  output_csv_path <span class="op">=</span> <span class="st">"path/to/cleaned_data_2021.csv"</span>,</span></span>
<span class="r-in"><span>  duckdb_file_path <span class="op">=</span> <span class="st">"custom/path/to/duckdb_database.duckdb"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.511375] Starting the NPPES data processing for one year...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.511474] Inputs:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.511545]   npi_file_path: path/to/nppes_data_2021.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.511773]   output_csv_path: path/to/cleaned_data_2021.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.51197]   duckdb_file_path: custom/path/to/duckdb_database.duckdb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.512162]   taxonomy_codes_1: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2024-11-18 00:43:03.512365]   taxonomy_codes_2: 207V00000X, 207VB0002X, 207VC0300X, 207VC0200X, 207VX0201X, 207VG0400X, 207VH0002X, 207VM0101X, 207VX0000X, 207VE0102X, 207VF0040X</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>beep() could not play the sound due to the following error:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Error in play.default(x, rate, ...): no audio drivers are available</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in nppes_initialize_environment():</span> could not find function "nppes_initialize_environment"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

