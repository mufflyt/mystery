% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_formula.R,
%   R/results_section_poisson_formula_maker.R
\name{create_formula}
\alias{create_formula}
\title{Create a Dynamic Formula for Mixed Effects Models}
\usage{
create_formula(data, response_var, random_effect = NULL)

create_formula(data, response_var, random_effect = NULL)
}
\arguments{
\item{data}{A dataframe containing the predictor and response variables.}

\item{response_var}{The name of the response variable in the dataframe.}

\item{random_effect}{Optional. The name of the random effect variable for the formula.}

\item{dataset}{A dataframe containing the variables for the formula.}

\item{outcome_var}{A character string specifying the outcome variable. Defaults to "business_days_until_appointment".}

\item{group_var}{A character string specifying the grouping variable. If NULL, creates a fixed-effects formula. Defaults to NULL.}

\item{exclude_columns}{A character vector of column names to exclude from the formula. Defaults to a pre-defined list.}
}
\value{
A formula object representing the specified model.

A formula object suitable for modeling in R.
}
\description{
Dynamically generates a formula for mixed-effects models by excluding specified columns and quoting
variables with special characters. Handles both fixed-effects and mixed-effects models by making
the grouping variable optional.

This function creates a formula for a Poisson model based on the provided data,
response variable, and optional random effect.
}
\examples{
# Example 1: Default behavior with pre-defined exclude_columns
dataset <- data.frame(
  business_days_until_appointment = rpois(100, lambda = 5),
  NPI = sample(letters, 100, replace = TRUE),
  age = rnorm(100, mean = 50, sd = 10),
  gender = sample(c("Male", "Female"), 100, replace = TRUE)
)
create_formula(dataset)

# Example 2: Custom outcome and grouping variables
dataset <- data.frame(
  wait_time = rpois(100, lambda = 7),
  provider_id = sample(letters, 100, replace = TRUE),
  income = rnorm(100, mean = 60000, sd = 15000),
  region = sample(c("Urban", "Rural"), 100, replace = TRUE)
)
create_formula(dataset, outcome_var = "wait_time", group_var = "provider_id")

# Example 3: Specifying additional columns to exclude
dataset <- data.frame(
  business_days_until_appointment = rpois(100, lambda = 3),
  NPI = sample(letters, 100, replace = TRUE),
  specialty = sample(c("Cardiology", "Dermatology"), 100, replace = TRUE),
  phone_number = sample(1000000000:1999999999, 100)
)
create_formula(dataset, exclude_columns = c("phone_number", "specialty"))
# Example usage:
response_variable <- "days"
random_effect_term <- "name"  # Change this to the desired random effect variable
df3_filtered <- data.frame(days = c(5, 10, 15), age = c(30, 40, 50), name = c("A", "B", "C"))
formula <- create_formula(df3_filtered, response_variable, random_effect_term)
formula

}
