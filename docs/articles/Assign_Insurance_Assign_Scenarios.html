<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sampling Spine Surgeons and Assigning Cases • tyler</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sampling Spine Surgeons and Assigning Cases">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tyler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Analyzing_Physician_Demographics_with_tyler.html">Analyzing Physician Demographics with tyler</a></li>
    <li><a class="dropdown-item" href="../articles/Assign_Insurance_Assign_Scenarios.html">Sampling Spine Surgeons and Assigning Cases</a></li>
    <li><a class="dropdown-item" href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/geocode.html">Geocoding</a></li>
    <li><a class="dropdown-item" href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/Poisson_Regression_and_Effects.html">Analyzing Wait Times for Appointments: Poisson Regression and Interaction Effects</a></li>
    <li><a class="dropdown-item" href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a></li>
    <li><a class="dropdown-item" href="../articles/taxonomy_search.html">Searching the NPI Database Starting with Taxonomy Codes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mufflyt/tyler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sampling Spine Surgeons and Assigning Cases</h1>
                        <h4 data-toc-skip class="author">Tyler Muffly,
MD</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mufflyt/tyler/blob/HEAD/vignettes/Assign_Insurance_Assign_Scenarios.Rmd" class="external-link"><code>vignettes/Assign_Insurance_Assign_Scenarios.Rmd</code></a></small>
      <div class="d-none name"><code>Assign_Insurance_Assign_Scenarios.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette demonstrates a structured workflow for managing data
related to spine surgeons. The key objectives are:</p>
<ul>
<li>Data Loading and Cleaning: Import a dataset of spine surgeons and
clean it for analysis.</li>
<li>Dataset Expansion: Assign multiple insurance scenarios to each
physician to simulate real-world variability.</li>
<li>Case Assignment: Distribute cases among lab assistants using a
priority-based splitting mechanism.</li>
<li>Efficient Scaling: Highlight tools and methods to manage large-scale
assignments with ease.</li>
</ul>
<p>This vignette will guide you through a step-by-step process to
achieve these goals using the <code>tyler</code> package and
<code>tidyverse</code> tools.</p>
</div>
<div class="section level2">
<h2 id="step-1-load-and-prepare-the-data">Step 1: Load and Prepare the Data<a class="anchor" aria-label="anchor" href="#step-1-load-and-prepare-the-data"></a>
</h2>
<div class="section level3">
<h3 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h3>
<p>The dataset of spine surgeons is loaded from an Excel file. The
following steps are performed:</p>
<ul>
<li>Filtering and Cleaning: Exclude physicians not marked for inclusion
and clean up column names.</li>
<li>Name Standardization: Ensure consistency by capitalizing first and
last names.</li>
<li>State and Time Zone Mapping: Convert state abbreviations to full
names and assign appropriate time zones.</li>
<li>Data Enrichment: Combine multiple fields into a single descriptive
column for ease of reference.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the data</span></span>
<span><span class="va">sample_specialists</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_xlsx</a></span><span class="op">(</span><span class="st">"~/Dropbox (Personal)/tyler/inst/extdata/Spine Physician List.xlsx"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    phone_number <span class="op">=</span> <span class="va">`Correct Number`</span>,</span>
<span>    specialty_primary <span class="op">=</span> <span class="va">taxonomies_desc</span>,</span>
<span>    NPI <span class="op">=</span> <span class="va">npi</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">`Include (Y/N)`</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">`Include (Y/N)`</span>, <span class="op">-</span><span class="va">`Reason for Exclusion`</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    last <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_title</a></span><span class="op">(</span><span class="va">last</span><span class="op">)</span>,</span>
<span>    first <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_title</a></span><span class="op">(</span><span class="va">first</span><span class="op">)</span>,</span>
<span>    full_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Dr."</span>, <span class="va">first</span>, <span class="va">last</span><span class="op">)</span>,</span>
<span>    addresses_state <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">`State Code`</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">state.abb</span> <span class="op">~</span> <span class="va">state.name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">`State Code`</span>, <span class="va">state.abb</span><span class="op">)</span><span class="op">]</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">`State Code`</span></span>
<span>    <span class="op">)</span>,</span>
<span>    timezone <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">addresses_state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Maine"</span>, <span class="st">"New Hampshire"</span>, <span class="st">"Vermont"</span>, <span class="st">"Massachusetts"</span>, <span class="st">"Rhode Island"</span>,</span>
<span>                             <span class="st">"Connecticut"</span>, <span class="st">"New York"</span>, <span class="st">"New Jersey"</span>, <span class="st">"Delaware"</span>, <span class="st">"Maryland"</span>,</span>
<span>                             <span class="st">"Pennsylvania"</span>, <span class="st">"Virginia"</span>, <span class="st">"West Virginia"</span>, <span class="st">"North Carolina"</span>,</span>
<span>                             <span class="st">"South Carolina"</span>, <span class="st">"Georgia"</span>, <span class="st">"Florida"</span>, <span class="st">"Ohio"</span>, <span class="st">"Indiana"</span>, <span class="st">"Michigan"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Eastern Time"</span>,</span>
<span>      <span class="va">addresses_state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Wisconsin"</span>, <span class="st">"Illinois"</span>, <span class="st">"Missouri"</span>, <span class="st">"North Dakota"</span>, <span class="st">"South Dakota"</span>,</span>
<span>                             <span class="st">"Nebraska"</span>, <span class="st">"Kansas"</span>, <span class="st">"Minnesota"</span>, <span class="st">"Iowa"</span>, <span class="st">"Kentucky"</span>, <span class="st">"Tennessee"</span>,</span>
<span>                             <span class="st">"Alabama"</span>, <span class="st">"Mississippi"</span>, <span class="st">"Arkansas"</span>, <span class="st">"Louisiana"</span>, <span class="st">"Texas"</span>, <span class="st">"Oklahoma"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Central Time"</span>,</span>
<span>      <span class="va">addresses_state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Montana"</span>, <span class="st">"Idaho"</span>, <span class="st">"Wyoming"</span>, <span class="st">"Utah"</span>, <span class="st">"Colorado"</span>, <span class="st">"New Mexico"</span>, <span class="st">"Arizona"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Mountain Time"</span>,</span>
<span>      <span class="va">addresses_state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Nevada"</span>, <span class="st">"Oregon"</span>, <span class="st">"Washington"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Pacific Time"</span>,</span>
<span>      <span class="va">addresses_state</span> <span class="op">==</span> <span class="st">"Hawaii"</span> <span class="op">~</span> <span class="st">"Hawaii-Aleutian Time"</span>,</span>
<span>      <span class="va">addresses_state</span> <span class="op">==</span> <span class="st">"Alaska"</span> <span class="op">~</span> <span class="st">"Alaska Time"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Unknown Timezone"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    NPI <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"NPI:"</span>, <span class="va">NPI</span><span class="op">)</span>,</span>
<span>    combined_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">full_name</span>, <span class="st">","</span>, <span class="va">phone_number</span>, <span class="st">","</span>, <span class="va">addresses_state</span>, <span class="st">","</span>, <span class="va">timezone</span>, <span class="st">","</span>, <span class="va">NPI</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">combined_info</span>, .before <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">sample_specialists</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 343</span></span>
<span><span class="co">## Columns: 27</span></span>
<span><span class="co">## $ combined_info            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Dr. Thomas Derian , 919-479-4160 , North Car…</span></span>
<span><span class="co">## $ Division                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "South Atlantic", "South Atlantic", "South At…</span></span>
<span><span class="co">## $ NPI                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NPI: 1962463125", "NPI: 1821063439", "NPI: 1…</span></span>
<span><span class="co">## $ first                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Thomas", "Joshua", "Stephen", "Craig", "Feli…</span></span>
<span><span class="co">## $ last                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Derian", "Herzog", "Enguidanos", "Popp", "Fi…</span></span>
<span><span class="co">## $ middle                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "CRAIG", "PAUL", "T", "A", <span style="color: #BB0000;">NA</span>, "E.", <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, …</span></span>
<span><span class="co">## $ basic_credential         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MD", <span style="color: #BB0000;">NA</span>, "MD", "MD", <span style="color: #BB0000;">NA</span>, "MD", <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">## $ basic_sole_proprietor    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO…</span></span>
<span><span class="co">## $ gender                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "M", "M", "M", "M", "F", "M", "M", "M", "M", …</span></span>
<span><span class="co">## $ basic_enumeration_date   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2006-03-29", "2006-02-17", "2006-06-26", "20…</span></span>
<span><span class="co">## $ basic_last_updated       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2009-09-25", <span style="color: #BB0000;">NA</span>, "2023-12-15", "2021-08-11",…</span></span>
<span><span class="co">## $ basic_certification_date <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, "2021-08-11", <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>,…</span></span>
<span><span class="co">## $ taxonomies_code          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "207XS0117X", <span style="color: #BB0000;">NA</span>, "207X00000X", "207X00000X",…</span></span>
<span><span class="co">## $ specialty_primary        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Orthopaedic Surgery, Orthopaedic Surgery of …</span></span>
<span><span class="co">## $ taxonomies_primary       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, <span style="color: #BB0000;">NA</span>, TRUE, FALSE, <span style="color: #BB0000;">NA</span>, TRUE, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>,…</span></span>
<span><span class="co">## $ addresses_address_1      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "4206 N ROXBORO STREET", "1400 JOHNSTON WILLI…</span></span>
<span><span class="co">## $ addresses_city           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "DURHAM", "NORTH CHESTERFIELD", "NICEVILLE", …</span></span>
<span><span class="co">## $ addresses_state          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "North Carolina", "Virginia", "Florida", "Flo…</span></span>
<span><span class="co">## $ addresses_postal_code    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 27704, 23235, 32578, 32960, 26506, 30720, 201…</span></span>
<span><span class="co">## $ phone_number             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "919-479-4160", "804-915-1910", "850-729-1444…</span></span>
<span><span class="co">## $ Age                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "68", "50", "59", "59", <span style="color: #BB0000;">NA</span>, "54", "40", "55",…</span></span>
<span><span class="co">## $ zip_code                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span>, 23235, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, 26506, <span style="color: #BB0000;">NA</span>, 20191, 33607, 3…</span></span>
<span><span class="co">## $ ID                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ortho_spine_batch_npi_search_cleaned_unique"…</span></span>
<span><span class="co">## $ `State Code`             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NC", "VA", "FL", "FL", "WV", "GA", "VA", "FL…</span></span>
<span><span class="co">## $ Region                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "South", "South", "South", "South", "South", …</span></span>
<span><span class="co">## $ full_name                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Dr. Thomas Derian", "Dr. Joshua Herzog", "Dr…</span></span>
<span><span class="co">## $ timezone                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Eastern Time", "Eastern Time", "Eastern Time…</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="step-2-expand-data-by-insurance-scenarios">Step 2: Expand Data by Insurance Scenarios<a class="anchor" aria-label="anchor" href="#step-2-expand-data-by-insurance-scenarios"></a>
</h2>
<div class="section level3">
<h3 id="description-1">Description<a class="anchor" aria-label="anchor" href="#description-1"></a>
</h3>
<p>To account for variability in physician behavior under different
insurance scenarios, each physician is assigned multiple insurance
categories (e.g., Medicare, Medicaid, BCBS). This step is critical for
simulating real-world conditions.</p>
<p>Key Points: * Function Used: <code>phase2_sample_surgeons</code> from
the <code>tyler</code> package. * Input Parameters: * <code>data</code>:
The cleaned dataset of physicians. * <code>insurance_types</code>: A
vector of insurance categories. * <code>seed</code>: Ensures
reproducibility for randomized assignments. * Output: A new dataset with
multiple rows per physician, each representing a unique insurance
scenario.</p>
<pre><code><span><span class="co">## INFO [2025-03-11 06:46:45] Starting phase2_sample_surgeons() with inputs:</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Insurance types: Medicare</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Insurance types: Medicaid</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Insurance types: BCBS</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Ensure unique phone numbers: TRUE</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Output CSV path: data/phase_2</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Seed: 1978</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Specialty column: specialty_primary</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] NPI column: NPI</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Seed set to 1978.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Ensuring unique phone numbers in the dataset.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Number of rows after ensuring unique phone numbers: 310.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Expanding physicians by insurance types...</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Expanded data includes insurance types. Total rows: 930.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved expanded data to: data/phase_2/phase2_sample_surgeons_by_insurance_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Completed phase2_sample_surgeons(). Returning expanded data.</span></span></code></pre>
<pre><code><span><span class="co">## Rows: 930</span></span>
<span><span class="co">## Columns: 28</span></span>
<span><span class="co">## $ combined_info            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Dr. Thomas Derian , 919-479-4160 , North Car…</span></span>
<span><span class="co">## $ Division                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "South Atlantic", "South Atlantic", "South At…</span></span>
<span><span class="co">## $ NPI                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NPI: 1962463125", "NPI: 1962463125", "NPI: 1…</span></span>
<span><span class="co">## $ first                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Thomas", "Thomas", "Thomas", "Joshua", "Josh…</span></span>
<span><span class="co">## $ last                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Derian", "Derian", "Derian", "Herzog", "Herz…</span></span>
<span><span class="co">## $ middle                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "CRAIG", "CRAIG", "CRAIG", "PAUL", "PAUL", "P…</span></span>
<span><span class="co">## $ basic_credential         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MD", "MD", "MD", <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, "MD", "MD", "MD…</span></span>
<span><span class="co">## $ basic_sole_proprietor    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NO", "NO", "NO", "NO", "NO", "NO", "NO", "NO…</span></span>
<span><span class="co">## $ gender                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "M", "M", "M", "M", "M", "M", "M", "M", "M", …</span></span>
<span><span class="co">## $ basic_enumeration_date   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2006-03-29", "2006-03-29", "2006-03-29", "20…</span></span>
<span><span class="co">## $ basic_last_updated       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2009-09-25", "2009-09-25", "2009-09-25", <span style="color: #BB0000;">NA</span>,…</span></span>
<span><span class="co">## $ basic_certification_date <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, "2021-08-…</span></span>
<span><span class="co">## $ taxonomies_code          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "207XS0117X", "207XS0117X", "207XS0117X", <span style="color: #BB0000;">NA</span>,…</span></span>
<span><span class="co">## $ specialty_primary        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Orthopaedic Surgery, Orthopaedic Surgery of …</span></span>
<span><span class="co">## $ taxonomies_primary       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, FALSE, FALSE, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, TRUE, TRUE, …</span></span>
<span><span class="co">## $ addresses_address_1      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "4206 N ROXBORO STREET", "4206 N ROXBORO STRE…</span></span>
<span><span class="co">## $ addresses_city           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "DURHAM", "DURHAM", "DURHAM", "NORTH CHESTERF…</span></span>
<span><span class="co">## $ addresses_state          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "North Carolina", "North Carolina", "North Ca…</span></span>
<span><span class="co">## $ addresses_postal_code    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 27704, 27704, 27704, 23235, 23235, 23235, 325…</span></span>
<span><span class="co">## $ phone_number             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "919-479-4160", "919-479-4160", "919-479-4160…</span></span>
<span><span class="co">## $ Age                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "68", "68", "68", "50", "50", "50", "59", "59…</span></span>
<span><span class="co">## $ zip_code                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, 23235, 23235, 23235, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, …</span></span>
<span><span class="co">## $ ID                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "ortho_spine_batch_npi_search_cleaned_unique"…</span></span>
<span><span class="co">## $ `State Code`             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NC", "NC", "NC", "VA", "VA", "VA", "FL", "FL…</span></span>
<span><span class="co">## $ Region                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "South", "South", "South", "South", "South", …</span></span>
<span><span class="co">## $ full_name                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Dr. Thomas Derian", "Dr. Thomas Derian", "Dr…</span></span>
<span><span class="co">## $ timezone                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Eastern Time", "Eastern Time", "Eastern Time…</span></span>
<span><span class="co">## $ insurance                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Medicare", "Medicaid", "BCBS", "Medicare", "…</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="step-3-assign-cases-to-lab-assistants">Step 3: Assign Cases to Lab Assistants<a class="anchor" aria-label="anchor" href="#step-3-assign-cases-to-lab-assistants"></a>
</h2>
<div class="section level3">
<h3 id="description-2">Description<a class="anchor" aria-label="anchor" href="#description-2"></a>
</h3>
<p>To manage workloads effectively, cases are assigned to lab assistants
based on specific criteria. The process ensures a fair distribution of
work and creates a systematic record of assignments.</p>
<p>Key Points: * Function Used:
<code>phase0_split_calls_to_lab_assistants_and_save_by_priority</code> *
Input Parameters: * <code>assistant_names</code>: A vector of lab
assistant names. * <code>split_column</code>: The column (e.g.,
insurance type) used to distribute cases. * <code>output_folder</code>:
Directory where the assignments are saved. * <code>seed_value</code>:
Ensures reproducibility. Output: Files saved for each assistant,
detailing their assigned cases.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define lab assistants</span></span>
<span><span class="va">assistant_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Amy Du"</span>, <span class="st">"Bret Hatzinger"</span>, <span class="st">"Paul Botolin"</span>, <span class="st">"Jasmine Hartman Budnik"</span>,</span>
<span>  <span class="st">"Miranda Manfre"</span>, <span class="st">"Jason Sidrak"</span>, <span class="st">"Daniel Stokes"</span>, <span class="st">"Ryan Tseng"</span>,</span>
<span>  <span class="st">"Tristan Seawalt"</span>, <span class="st">"Christopher Hawryluk"</span>, <span class="st">"Lind"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign cases and save</span></span>
<span><span class="fu">tyler</span><span class="fu">::</span><span class="fu"><a href="../reference/phase0_split_calls_to_lab_assistants_and_save_by_priority.html">phase0_split_calls_to_lab_assistants_and_save_by_priority</a></span><span class="op">(</span></span>
<span>  input_data_or_path <span class="op">=</span> <span class="va">phase2_sample_surgeons_output</span>,</span>
<span>  output_folder <span class="op">=</span> <span class="st">"inst/extdata/caller_assignments"</span>,</span>
<span>  assistant_names <span class="op">=</span> <span class="va">assistant_names</span>,</span>
<span>  seed_value <span class="op">=</span> <span class="fl">1978</span>,</span>
<span>  complete_file_prefix <span class="op">=</span> <span class="st">"complete_version_"</span>,</span>
<span>  split_file_prefix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  recursive_create <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  split_column <span class="op">=</span> <span class="st">"insurance"</span>,</span>
<span>  priority_values <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## INFO [2025-03-11 06:46:45] Starting phase0_split_calls_to_lab_assistants_and_save_by_priority() with inputs:</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Output folder: inst/extdata/caller_assignments</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Assistant names: Amy Du, Bret Hatzinger, Paul Botolin, Jasmine Hartman Budnik, Miranda Manfre, Jason Sidrak, Daniel Stokes, Ryan Tseng, Tristan Seawalt, Christopher Hawryluk, Lind</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Seed value: 1978</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Split column: insurance</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Priority values: None</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Loaded input data with 930 rows and 28 columns.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Validated presence of split column: insurance.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Assigned lab assistants to rows in the dataset.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Added row numbers and updated combined_info column.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved complete dataset to: inst/extdata/caller_assignments/complete_version_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Amy Du to: inst/extdata/caller_assignments/Amy Du_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Bret Hatzinger to: inst/extdata/caller_assignments/Bret Hatzinger_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Christopher Hawryluk to: inst/extdata/caller_assignments/Christopher Hawryluk_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Daniel Stokes to: inst/extdata/caller_assignments/Daniel Stokes_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Jasmine Hartman Budnik to: inst/extdata/caller_assignments/Jasmine Hartman Budnik_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Jason Sidrak to: inst/extdata/caller_assignments/Jason Sidrak_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Lind to: inst/extdata/caller_assignments/Lind_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Miranda Manfre to: inst/extdata/caller_assignments/Miranda Manfre_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Paul Botolin to: inst/extdata/caller_assignments/Paul Botolin_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Ryan Tseng to: inst/extdata/caller_assignments/Ryan Tseng_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Saved split data for Tristan Seawalt to: inst/extdata/caller_assignments/Tristan Seawalt_2025-03-11_06-46-45.csv.</span></span>
<span><span class="co">## INFO [2025-03-11 06:46:45] Completed phase0_split_calls_to_lab_assistants_and_save_by_priority().</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This vignette demonstrates a streamlined workflow for managing spine
surgeon data, simulating real-world scenarios, and distributing
workloads efficiently. Key takeaways include:</p>
<ul>
<li>Data Loading and Cleaning: Standardizing and preparing datasets is
critical for downstream analysis.</li>
<li>Dataset Expansion: Assigning multiple insurance scenarios to
physicians enables robust testing and simulations.</li>
<li>Case Assignment: Distributing cases among lab assistants ensures
fair and systematic workload management.</li>
</ul>
<p>Using this workflow, researchers can effectively scale and manage
large datasets, ensuring reproducibility and efficiency in their
projects.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
