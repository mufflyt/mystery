<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Search and Process NPI Numbers with Detailed Logging — phase0_search_npi_by_number • tyler</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Search and Process NPI Numbers with Detailed Logging — phase0_search_npi_by_number"><meta name="description" content="This function searches for clinician data based on a list of provided NPI numbers, processes the data,
and saves the search results in specified chunk sizes to CSV files. Logging occurs at every step, and
the function is built to work out-of-the-box with example input, default chunking, and logging to the console."><meta property="og:description" content="This function searches for clinician data based on a list of provided NPI numbers, processes the data,
and saves the search results in specified chunk sizes to CSV files. Logging occurs at every step, and
the function is built to work out-of-the-box with example input, default chunking, and logging to the console."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tyler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Analyzing_Physician_Demographics_with_tyler.html">Analyzing Physician Demographics with tyler</a></li>
    <li><a class="dropdown-item" href="../articles/Assign_Insurance_Assign_Scenarios.html">Sampling Spine Surgeons and Assigning Cases</a></li>
    <li><a class="dropdown-item" href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/geocode.html">Geocoding</a></li>
    <li><a class="dropdown-item" href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/Poisson_Regression_and_Effects.html">Analyzing Wait Times for Appointments: Poisson Regression and Interaction Effects</a></li>
    <li><a class="dropdown-item" href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a></li>
    <li><a class="dropdown-item" href="../articles/taxonomy_search.html">Searching the NPI Database Starting with Taxonomy Codes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mufflyt/tyler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Search and Process NPI Numbers with Detailed Logging</h1>
      <small class="dont-index">Source: <a href="https://github.com/mufflyt/tyler/blob/HEAD/R/phase0_search_npi_by_number.R" class="external-link"><code>R/phase0_search_npi_by_number.R</code></a>, <a href="https://github.com/mufflyt/tyler/blob/HEAD/R/search_and_process_npi.R" class="external-link"><code>R/search_and_process_npi.R</code></a></small>
      <div class="d-none name"><code>phase0_search_npi_by_number.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function searches for clinician data based on a list of provided NPI numbers, processes the data,
and saves the search results in specified chunk sizes to CSV files. Logging occurs at every step, and
the function is built to work out-of-the-box with example input, default chunking, and logging to the console.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">phase0_search_npi_by_number</span><span class="op">(</span></span>
<span>  <span class="va">npi_dataframe</span>,</span>
<span>  records_per_chunk <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  save_directory <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">phase0_search_npi_by_number</span><span class="op">(</span></span>
<span>  <span class="va">npi_dataframe</span>,</span>
<span>  records_per_chunk <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  save_directory <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-npi-dataframe">npi_dataframe<a class="anchor" aria-label="anchor" href="#arg-npi-dataframe"></a></dt>
<dd><p>A data frame with a column 'npi' containing the NPI numbers to search.</p></dd>


<dt id="arg-records-per-chunk">records_per_chunk<a class="anchor" aria-label="anchor" href="#arg-records-per-chunk"></a></dt>
<dd><p>Integer. Specifies the number of records to save per CSV file chunk. Default is 10.</p></dd>


<dt id="arg-save-directory">save_directory<a class="anchor" aria-label="anchor" href="#arg-save-directory"></a></dt>
<dd><p>Character. Directory to save chunked results. Default is NULL, which defaults to the current working directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A combined data frame of NPI search results</p>
<p>A combined data frame of all NPI search results. Returns an empty data frame if no valid NPIs are found.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: Basic usage with default settings</span></span></span>
<span class="r-in"><span><span class="va">npi_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>npi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1447273792"</span>, <span class="st">"1023030814"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clinician_info</span> <span class="op">&lt;-</span> <span class="fu">phase0_search_npi_by_number</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_dataframe <span class="op">=</span> <span class="va">npi_list</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:16] Function phase0_search_npi_by_number called with inputs: records_per_chunk = 10, save_directory = /Users/tylermuffly/Dropbox (Personal)/tyler/docs/reference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:16] Filtered NPI data. Number of valid NPIs: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:16] Fetching data for NPI: 1447273792</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:18] Successfully retrieved and flattened data for NPI: 1447273792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:18] Fetching data for NPI: 1023030814</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Successfully retrieved and flattened data for NPI: 1023030814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Data retrieved for 2 NPIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Combined all clinician information. Total rows: 6, Total columns: 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Saved chunk of clinician information to /Users/tylermuffly/Dropbox (Personal)/tyler/docs/reference/npi_results_20250311054520_chunk_1.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Function phase0_search_npi_by_number completed successfully.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Custom chunk size and directory</span></span></span>
<span class="r-in"><span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clinician_info</span> <span class="op">&lt;-</span> <span class="fu">phase0_search_npi_by_number</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_dataframe <span class="op">=</span> <span class="va">npi_list</span>,</span></span>
<span class="r-in"><span>  records_per_chunk <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  save_directory <span class="op">=</span> <span class="va">temp_dir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Function phase0_search_npi_by_number called with inputs: records_per_chunk = 5, save_directory = /var/folders/t6/jct906nn019fnrg7qr_b438w0000gn/T//RtmpjhOkiB</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Filtered NPI data. Number of valid NPIs: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:20] Fetching data for NPI: 1447273792</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:21] Successfully retrieved and flattened data for NPI: 1447273792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:21] Fetching data for NPI: 1023030814</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Successfully retrieved and flattened data for NPI: 1023030814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Data retrieved for 2 NPIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Combined all clinician information. Total rows: 6, Total columns: 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Saved chunk of clinician information to /var/folders/t6/jct906nn019fnrg7qr_b438w0000gn/T//RtmpjhOkiB/npi_results_20250311054523_chunk_1.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Saved chunk of clinician information to /var/folders/t6/jct906nn019fnrg7qr_b438w0000gn/T//RtmpjhOkiB/npi_results_20250311054523_chunk_6.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Function phase0_search_npi_by_number completed successfully.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Handle larger dataset with logging</span></span></span>
<span class="r-in"><span><span class="va">npi_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1447273792"</span>, <span class="st">"1023030814"</span>, <span class="st">"1750380234"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clinician_info</span> <span class="op">&lt;-</span> <span class="fu">phase0_search_npi_by_number</span><span class="op">(</span></span></span>
<span class="r-in"><span>  npi_dataframe <span class="op">=</span> <span class="va">npi_large</span>,</span></span>
<span class="r-in"><span>  records_per_chunk <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  save_directory <span class="op">=</span> <span class="st">"npi_results"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Function phase0_search_npi_by_number called with inputs: records_per_chunk = 2, save_directory = npi_results</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Filtered NPI data. Number of valid NPIs: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:23] Fetching data for NPI: 1447273792</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:25] Successfully retrieved and flattened data for NPI: 1447273792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:25] Fetching data for NPI: 1023030814</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:27] Successfully retrieved and flattened data for NPI: 1023030814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:27] Fetching data for NPI: 1750380234</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ERROR [2025-03-11 05:45:28] Error retrieving data for NPI 1750380234: `df` must be an npi_results S3 object, not tbl_df.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Data retrieved for 2 NPIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Combined all clinician information. Total rows: 6, Total columns: 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Saved chunk of clinician information to npi_results/npi_results_20250311054528_chunk_1.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Saved chunk of clinician information to npi_results/npi_results_20250311054528_chunk_3.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Saved chunk of clinician information to npi_results/npi_results_20250311054528_chunk_5.csv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Function phase0_search_npi_by_number completed successfully.</span>
<span class="r-in"><span><span class="co"># Example 1: Basic usage with default chunk size and current directory</span></span></span>
<span class="r-in"><span><span class="va">npi_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>npi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1234567890"</span>, <span class="st">"1098765432"</span>, <span class="st">"1987654321"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">phase0_search_npi_by_number</span><span class="op">(</span>npi_dataframe <span class="op">=</span> <span class="va">npi_list</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Function phase0_search_npi_by_number called with inputs: records_per_chunk = 10, save_directory = /Users/tylermuffly/Dropbox (Personal)/tyler/docs/reference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Filtered NPI data. Number of valid NPIs: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:28] Fetching data for NPI: 1234567890</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ERROR [2025-03-11 05:45:30] Error retrieving data for NPI 1234567890: `df` must be an npi_results S3 object, not tbl_df.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:30] Fetching data for NPI: 1098765432</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ERROR [2025-03-11 05:45:32] Error retrieving data for NPI 1098765432: `df` must be an npi_results S3 object, not tbl_df.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:32] Fetching data for NPI: 1987654321</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 10 records requested</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Requesting records 0-10...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ERROR [2025-03-11 05:45:33] Error retrieving data for NPI 1987654321: `df` must be an npi_results S3 object, not tbl_df.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:33] Data retrieved for 0 NPIs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:33] Combined all clinician information. Total rows: 0, Total columns: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:33] No clinician information to save.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:33] Function phase0_search_npi_by_number completed successfully.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Null data.table (0 rows and 0 cols)</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

