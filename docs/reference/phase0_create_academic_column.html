<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create an Academic Column Based on Facility Names — phase0_create_academic_column • tyler</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create an Academic Column Based on Facility Names — phase0_create_academic_column"><meta name="description" content='This function adds a new column, academic, to the provided data frame.
The column is populated based on the presence of specific academic terms
(such as "University", "Medical School", "Health System", etc.) in
specified columns. Rows where no match is found will have the value
"Private Practice", and rows where all the specified columns are NA
will have the value NA.'><meta property="og:description" content='This function adds a new column, academic, to the provided data frame.
The column is populated based on the presence of specific academic terms
(such as "University", "Medical School", "Health System", etc.) in
specified columns. Rows where no match is found will have the value
"Private Practice", and rows where all the specified columns are NA
will have the value NA.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tyler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Analyzing_Physician_Demographics_with_tyler.html">Analyzing Physician Demographics with tyler</a></li>
    <li><a class="dropdown-item" href="../articles/Assign_Insurance_Assign_Scenarios.html">Sampling Spine Surgeons and Assigning Cases</a></li>
    <li><a class="dropdown-item" href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/geocode.html">Geocoding</a></li>
    <li><a class="dropdown-item" href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/Poisson_Regression_and_Effects.html">Analyzing Wait Times for Appointments: Poisson Regression and Interaction Effects</a></li>
    <li><a class="dropdown-item" href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a></li>
    <li><a class="dropdown-item" href="../articles/taxonomy_search.html">Searching the NPI Database Starting with Taxonomy Codes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mufflyt/tyler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create an Academic Column Based on Facility Names</h1>
      <small class="dont-index">Source: <a href="https://github.com/mufflyt/tyler/blob/HEAD/R/phase0_create_academic_column.R" class="external-link"><code>R/phase0_create_academic_column.R</code></a></small>
      <div class="d-none name"><code>phase0_create_academic_column.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function adds a new column, <code>academic</code>, to the provided data frame.
The column is populated based on the presence of specific academic terms
(such as "University", "Medical School", "Health System", etc.) in
specified columns. Rows where no match is found will have the value
"Private Practice", and rows where all the specified columns are <code>NA</code>
will have the value <code>NA</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">phase0_create_academic_column</span><span class="op">(</span></span>
<span>  <span class="va">input_data</span>,</span>
<span>  <span class="va">columns_to_search</span>,</span>
<span>  academic_keywords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Medical College"</span>, <span class="st">"University of"</span>, <span class="st">"University"</span>, <span class="st">"Univ"</span>,</span>
<span>    <span class="st">"Children's"</span>, <span class="st">"Infirmary"</span>, <span class="st">"Medical School"</span>, <span class="st">"Medical Center"</span>, <span class="st">"Children"</span>,</span>
<span>    <span class="st">"Health System"</span>, <span class="st">"Foundation"</span>, <span class="st">"Sch of Med"</span>, <span class="st">"Mayo"</span>, <span class="st">"UAB"</span>, <span class="st">"Cancer Ctr"</span>, <span class="st">"Penn"</span>,</span>
<span>    <span class="st">"College of Medicine"</span>, <span class="st">"Cancer"</span>, <span class="st">"Cleveland Clinic"</span>, <span class="st">"Henry Ford"</span>, <span class="st">"Yale"</span>, <span class="st">"Brigham"</span>,</span>
<span>    <span class="st">"Health Sciences Center"</span>, <span class="st">"SUNY"</span>, <span class="st">"UCLA"</span>, <span class="st">"UAMS"</span>, <span class="st">"Medical Sciences"</span>, <span class="st">"Cedars"</span>,</span>
<span>    <span class="st">"Stanford"</span>, <span class="st">"George Washington"</span>, <span class="st">"Medstar"</span>, <span class="st">"USF"</span>, <span class="st">"GME"</span>, <span class="st">"Emory"</span>, <span class="st">"Morehouse"</span>,</span>
<span>    <span class="st">"Mercer"</span>, <span class="st">"Loyola"</span>, <span class="st">"Duke"</span><span class="op">)</span>,</span>
<span>  private_practice_keywords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LLC"</span>, <span class="st">"INC"</span>, <span class="st">"P.A."</span>, <span class="st">"CORPORATION"</span>, <span class="st">"PLLC"</span>,</span>
<span>    <span class="st">"PARTNERSHIP"</span>, <span class="st">"LTD"</span>, <span class="st">"P C"</span>, <span class="st">"PS"</span>, <span class="st">"L L P"</span>, <span class="st">"INCORPORATED"</span>, <span class="st">"DO"</span>, <span class="st">"MD"</span>, <span class="st">"MBA"</span>, <span class="st">"PA"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-data">input_data<a class="anchor" aria-label="anchor" href="#arg-input-data"></a></dt>
<dd><p>A data frame containing the data to process.</p></dd>


<dt id="arg-columns-to-search">columns_to_search<a class="anchor" aria-label="anchor" href="#arg-columns-to-search"></a></dt>
<dd><p>A character vector of column names to search
for academic terms.</p></dd>


<dt id="arg-academic-keywords">academic_keywords<a class="anchor" aria-label="anchor" href="#arg-academic-keywords"></a></dt>
<dd><p>A character vector of keywords representing
academic institutions or terms. The default includes common academic
terms such as "University", "Medical College", etc.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If TRUE, detailed logging of the process will
be printed to the console. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input data frame with a new column <code>academic</code> indicating
whether the facility is academic or private practice, or <code>NA</code> if all
specified columns are <code>NA</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The logic behind this categorization is as follows:</p><ul><li><p><strong>"University"</strong>: If any of the specified columns contain any of the
academic terms (case-insensitive) defined in the <code>search_strings</code> argument,
then that row is labeled as "University".</p></li>
<li><p><strong>"Private Practice"</strong>: If no academic terms are found in the specified
columns for a row, then the row is labeled as "Private Practice".</p></li>
<li><p><strong>NA</strong>: If all specified columns for a row contain <code>NA</code> values, the
<code>academic</code> column for that row will remain <code>NA</code>.</p></li>
</ul><p>This function is a good example of searching for data within multiple columns and assigning a value to a new output column based on whether specific terms are present.
It demonstrates how multiple columns can be examined simultaneously, and how a new categorical variable (<code>academic</code>) is derived based on keyword matching in these columns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: Basic usage with default academic keywords and verbose logging</span></span></span>
<span class="r-in"><span><span class="va">clinician_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  clinician_info_facility_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"University of California"</span>, <span class="st">"Mayo Clinic"</span>,</span></span>
<span class="r-in"><span>                                   <span class="st">"Private Clinic"</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  addresses_address_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"200 Medical Ave"</span>, <span class="st">"123 Health St"</span>, <span class="st">"456 Private Rd"</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_with_academic</span> <span class="op">&lt;-</span> <span class="fu">phase0_create_academic_column</span><span class="op">(</span><span class="va">clinician_data</span>,</span></span>
<span class="r-in"><span>                                           <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"clinician_info_facility_name"</span>,</span></span>
<span class="r-in"><span>                                             <span class="st">"addresses_address_1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Starting function 'phase0_create_academic_column'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Input data dimensions: 4 rows, 2 columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Columns to search in: clinician_info_facility_name, addresses_address_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Academic search keywords: Medical College, University of, University, Univ, Children's, Infirmary, Medical School, Medical Center, Children, Health System, Foundation, Sch of Med, Mayo, UAB, Cancer Ctr, Penn, College of Medicine, Cancer, Cleveland Clinic, Henry Ford, Yale, Brigham, Health Sciences Center, SUNY, UCLA, UAMS, Medical Sciences, Cedars, Stanford, George Washington, Medstar, USF, GME, Emory, Morehouse, Mercer, Loyola, Duke</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Private practice search keywords: LLC, INC, P.A., CORPORATION, PLLC, PARTNERSHIP, LTD, P C, PS, L L P, INCORPORATED, DO, MD, MBA, PA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Transformation completed. New column 'academic' added to the data frame.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Output data dimensions: 4 rows, 3 columns.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_with_academic</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   clinician_info_facility_name addresses_address_1         academic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     University of California     200 Medical Ave       University</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                  Mayo Clinic       123 Health St       University</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               Private Clinic      456 Private Rd Private Practice</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                         &lt;NA&gt;                &lt;NA&gt;             &lt;NA&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Using custom academic keywords and suppressing verbose logging</span></span></span>
<span class="r-in"><span><span class="va">custom_keywords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Harvard"</span>, <span class="st">"Stanford"</span>, <span class="st">"Yale"</span>, <span class="st">"Medical School"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clinician_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  clinician_info_facility_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Harvard Medical School"</span>, <span class="st">"Private Clinic"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  addresses_address_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1 Medical Center"</span>, <span class="st">"123 Private Rd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_with_academic</span> <span class="op">&lt;-</span> <span class="fu">phase0_create_academic_column</span><span class="op">(</span><span class="va">clinician_data</span>,</span></span>
<span class="r-in"><span>                                           <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"clinician_info_facility_name"</span>,</span></span>
<span class="r-in"><span>                                             <span class="st">"addresses_address_1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           academic_keywords <span class="op">=</span> <span class="va">custom_keywords</span>,</span></span>
<span class="r-in"><span>                                           verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Starting function 'phase0_create_academic_column'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Input data dimensions: 2 rows, 2 columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Columns to search in: clinician_info_facility_name, addresses_address_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Academic search keywords: Harvard, Stanford, Yale, Medical School</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Private practice search keywords: LLC, INC, P.A., CORPORATION, PLLC, PARTNERSHIP, LTD, P C, PS, L L P, INCORPORATED, DO, MD, MBA, PA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Transformation completed. New column 'academic' added to the data frame.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Output data dimensions: 2 rows, 3 columns.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_with_academic</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   clinician_info_facility_name addresses_address_1         academic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       Harvard Medical School    1 Medical Center       University</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               Private Clinic      123 Private Rd Private Practice</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Case with all columns as NA, resulting in NA in the academic column</span></span></span>
<span class="r-in"><span><span class="va">clinician_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  clinician_info_facility_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  addresses_address_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_with_academic</span> <span class="op">&lt;-</span> <span class="fu">phase0_create_academic_column</span><span class="op">(</span><span class="va">clinician_data</span>,</span></span>
<span class="r-in"><span>                                           <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"clinician_info_facility_name"</span>,</span></span>
<span class="r-in"><span>                                             <span class="st">"addresses_address_1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                           verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Starting function 'phase0_create_academic_column'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Input data dimensions: 2 rows, 2 columns.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Columns to search in: clinician_info_facility_name, addresses_address_1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Academic search keywords: Medical College, University of, University, Univ, Children's, Infirmary, Medical School, Medical Center, Children, Health System, Foundation, Sch of Med, Mayo, UAB, Cancer Ctr, Penn, College of Medicine, Cancer, Cleveland Clinic, Henry Ford, Yale, Brigham, Health Sciences Center, SUNY, UCLA, UAMS, Medical Sciences, Cedars, Stanford, George Washington, Medstar, USF, GME, Emory, Morehouse, Mercer, Loyola, Duke</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Private practice search keywords: LLC, INC, P.A., CORPORATION, PLLC, PARTNERSHIP, LTD, P C, PS, L L P, INCORPORATED, DO, MD, MBA, PA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Transformation completed. New column 'academic' added to the data frame.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2025-03-11 05:45:12] Output data dimensions: 2 rows, 3 columns.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_with_academic</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   clinician_info_facility_name addresses_address_1 academic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                           NA                  NA     &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                           NA                  NA     &lt;NA&gt;</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

